{% extends 'dashboard.html' %}

{% block title %}{{ 'Editar' if tipo else 'Nuevo' }} Tipo de Habitación · lemahotel{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12 mb-3 d-flex justify-content-between align-items-center">
        <h4 class="mb-0">{{ 'Editar' if tipo else 'Nuevo' }} Tipo de Habitación</h4>
        <a href="{{ url_for('main.lista_tipos_habitacion') }}" class="btn btn-outline-secondary">
            <i class="bx bx-arrow-back"></i> Volver
        </a>
    </div>

    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Datos del Tipo</h5>
                {% if tasa_actual %}
                <p class="text-muted small mb-0">
                    Tasa actual: <strong>{{ tasa_actual.tasa_bs_por_usd }}</strong> Bs por 1 USD ({{ tasa_actual.fecha }})
                </p>
                {% else %}
                <p class="text-muted small mb-0">
                    No hay tasa de cambio activa. Los montos en Bs se calcularán cuando exista una.
                </p>
                {% endif %}
            </div>
            <div class="card-body">
                <form method="post">
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input type="text" name="nombre" class="form-control" required
                               value="{{ tipo.nombre if tipo else '' }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Descripción</label>
                        <textarea name="descripcion" class="form-control" rows="3">{{ tipo.descripcion if tipo else '' }}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Precio por noche (USD)</label>
                            <input type="number" step="0.01" name="precio_por_noche_usd" class="form-control"
                                   value="{{ tipo.precio_por_noche_usd if tipo else '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Precio por noche (Bs)</label>
                            <input type="number" step="0.01" class="form-control"
                                   value="{{ tipo.precio_por_noche_bs if tipo else '' }}" readonly
                                   placeholder="Se calculará automáticamente">
                        </div>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="activo" name="activo"
                               {% if not tipo or tipo.activo %}checked{% endif %}>
                        <label class="form-check-label" for="activo">Activo</label>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary">
                            <i class="bx bx-save"></i> Guardar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

